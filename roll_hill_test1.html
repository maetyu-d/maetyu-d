let car;
let slopeTopY = 100;
let slopeBottomY;
let slopeWidthTop = 200;
let slopeWidthBottom = 400;

function setup() {
  createCanvas(600, 400);
  slopeBottomY = height - 50;

  // Car starts at the middle top of slope
  car = new Car(width / 2, slopeTopY + 20);
}

function draw() {
  background(220);

  // Draw slope (a trapezoid narrowing to the top)
  noStroke();
  fill(180);
  quad(
    width/2 - slopeWidthTop/2, slopeTopY,   // top left
    width/2 + slopeWidthTop/2, slopeTopY,   // top right
    width/2 + slopeWidthBottom/2, slopeBottomY, // bottom right
    width/2 - slopeWidthBottom/2, slopeBottomY  // bottom left
  );

  // Update and draw car
  car.update();
  car.show();
}

class Car {
  constructor(x, y) {
    this.pos = createVector(x, y);
    this.speed = 2;   // downward speed
    this.drift = -0.5; // left drift caused by bigger right wheels
    this.size = 40;
    this.trail = []; // store trail positions
  }

  update() {
    if (this.pos.y < slopeBottomY - this.size/2) {
      this.pos.y += this.speed;
      this.pos.x += this.drift;
      this.trail.push(this.pos.copy()); // save current position
    }
  }

  show() {
    // Draw trail (permanent)
    noFill();
    stroke(0, 200, 0); // green
    strokeWeight(3);
    beginShape();
    for (let p of this.trail) {
      vertex(p.x, p.y);
    }
    endShape();

    // Draw car body
    push();
    rectMode(CENTER);
    fill(200, 50, 50);
    rect(this.pos.x, this.pos.y, this.size, this.size*0.6, 5);

    // Wheels - left side (smaller)
    fill(0);
    ellipse(this.pos.x - this.size/2, this.pos.y - this.size*0.25, 8, 8); // top-left
    ellipse(this.pos.x - this.size/2, this.pos.y + this.size*0.25, 8, 8); // bottom-left

    // Wheels - right side (bigger)
    ellipse(this.pos.x + this.size/2, this.pos.y - this.size*0.25, 14, 14); // top-right
    ellipse(this.pos.x + this.size/2, this.pos.y + this.size*0.25, 14, 14); // bottom-right
    pop();
  }
}



